<?xml version="1.0"?><xliff version="1.2" xmlns="urn:oasis:names:tc:xliff:document:1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:oasis:names:tc:xliff:document:1.2 xliff-core-1.2-transitional.xsd"><file datatype="xml" original="4-exercise-create-azure-batch-job-in-cli-to-run-parallel-task.md" source-language="en-US" target-language="en-US"><header><tool tool-id="mdxliff" tool-name="mdxliff"  tool-company="Microsoft" /><xliffext:skl_file_name xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">4-exercise-create-azure-batch-job-in-cli-to-run-parallel-task.604fc4.e81ec8b8ff66c7b5b1a9d92c2835b572db3867e4.skl</xliffext:skl_file_name><xliffext:version xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">1.2</xliffext:version><xliffext:ms.openlocfilehash xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">e81ec8b8ff66c7b5b1a9d92c2835b572db3867e4</xliffext:ms.openlocfilehash><xliffext:ms.sourcegitcommit xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">ba7e452ac39d7f09a5646044b44de0e1cdc54982</xliffext:ms.sourcegitcommit><xliffext:ms.openlocfilepath xmlns:xliffext="urn:microsoft:content:schema:xliffextensions">learn-pr\azure\run-parallel-tasks-in-azure-batch-with-the-azure-cli\includes\4-exercise-create-azure-batch-job-in-cli-to-run-parallel-task.md</xliffext:ms.openlocfilepath></header><body><group id="content" extype="content"><trans-unit id="101" translate="yes" xml:space="preserve">
          <source>Azure CLI lets you create and deploy Azure Batch resources from the command line.</source>
        </trans-unit><trans-unit id="102" translate="yes" xml:space="preserve">
          <source>As the solution architect for the non-profit, you want to start creating a Batch solution for the OCR scenario on Azure.</source>
        </trans-unit><trans-unit id="103" translate="yes" xml:space="preserve">
          <source>As a first step, you're going to test creating a Batch account, a pool of worker nodes, a job, and tasks, all using the Azure CLI.</source>
        </trans-unit><trans-unit id="104" translate="yes" xml:space="preserve">
          <source>The Azure CLI is a cross-platform command line for creating and managing Azure resources.</source>
        </trans-unit><trans-unit id="105" translate="yes" xml:space="preserve">
          <source>It uses a consistent <ph id="ph1">```az noun verb --properties```</ph> syntax.</source>
        </trans-unit><trans-unit id="106" translate="yes" xml:space="preserve">
          <source>CLI commands to manage Azure Batch follow this convention, and so all commands take the form of <ph id="ph1">```az batch verb --properties```</ph>.</source>
        </trans-unit><trans-unit id="107" translate="yes" xml:space="preserve">
          <source>The exercises in this module are optional.</source>
        </trans-unit><trans-unit id="108" translate="yes" xml:space="preserve">
          <source>To complete the exercises, you will need your own Azure subscription.</source>
        </trans-unit><trans-unit id="109" translate="yes" xml:space="preserve">
          <source>Create the Azure Batch resources</source>
        </trans-unit><trans-unit id="110" translate="yes" xml:space="preserve">
          <source>First, you'll create the Azure Batch account and pool of worker nodes for your test scenario.</source>
        </trans-unit><trans-unit id="111" translate="yes" xml:space="preserve">
          <source>You'll then create a Batch job and tasks to run in the pool.</source>
        </trans-unit><trans-unit id="112" translate="yes" xml:space="preserve">
          <source>Sign into the <bpt id="p1">[</bpt>Azure portal<ept id="p1">](https://portal.azure.com/)</ept>.</source>
        </trans-unit><trans-unit id="113" translate="yes" xml:space="preserve">
          <source>Create a new resource group</source>
        </trans-unit><trans-unit id="114" translate="yes" xml:space="preserve">
          <source>Click <bpt id="p1">**</bpt>Resource groups<ept id="p1">**</ept> in the left menu.</source>
        </trans-unit><trans-unit id="115" translate="yes" xml:space="preserve">
          <source>Click <bpt id="p1">**</bpt>+ Add<ept id="p1">**</ept>.</source>
        </trans-unit><trans-unit id="116" translate="yes" xml:space="preserve">
          <source>Complete the form to create a new resource group for the exercise and note the name.</source>
        </trans-unit><trans-unit id="117" translate="yes" xml:space="preserve">
          <source>Create an Azure Batch account</source>
        </trans-unit><trans-unit id="118" translate="yes" xml:space="preserve">
          <source>In portal, open the cloud shell by clicking <bpt id="p1">**</bpt>&gt;_<ept id="p1">**</ept> in the top menu.</source>
        </trans-unit><trans-unit id="119" translate="yes" xml:space="preserve">
          <source>Create environment variables for your resource group and batch resource.</source>
        </trans-unit><trans-unit id="120" translate="yes" xml:space="preserve">
          <source>Run the following command in the Cloud Shell to create an Azure Batch account.</source>
        </trans-unit><trans-unit id="121" translate="yes" xml:space="preserve">
          <source>Choose from one of the following locations:</source>
        </trans-unit><trans-unit id="122" translate="yes" xml:space="preserve">
          <source>Run the following command to sign in to your Azure Batch account:</source>
        </trans-unit><trans-unit id="123" translate="yes" xml:space="preserve">
          <source>Create a pool of three Standard A1 v2 VMs running Ubuntu 16.04:</source>
        </trans-unit><trans-unit id="124" translate="yes" xml:space="preserve">
          <source>Run the following command to periodically determine whether the nodes are ready:</source>
        </trans-unit><trans-unit id="125" translate="yes" xml:space="preserve">
          <source>When this query shows that the nodes are "steady", they are ready to work.</source>
        </trans-unit><trans-unit id="126" translate="yes" xml:space="preserve">
          <source>While they show as "resizing", they are being provisioned.</source>
        </trans-unit><trans-unit id="127" translate="yes" xml:space="preserve">
          <source>You can use the up arrow key to repeat the most recent command in the Cloud Shell if you want to query the status of the nodes more than once.</source>
        </trans-unit><trans-unit id="128" translate="yes" xml:space="preserve">
          <source>Run the following command to create a "Batch job", a logical grouping for all the tasks that will run on your nodes:</source>
        </trans-unit><trans-unit id="129" translate="yes" xml:space="preserve">
          <source>Run the following command to create Batch tasks:</source>
        </trans-unit><trans-unit id="130" translate="yes" xml:space="preserve">
          <source>This loop creates a series of numbered Batch tasks, each of which outputs information about the task ID and node ID involved.</source>
        </trans-unit><trans-unit id="131" translate="yes" xml:space="preserve">
          <source>By examining what's happening here closely, you can see quite a few characteristics of the way Azure Batch works.</source>
        </trans-unit><trans-unit id="132" translate="yes" xml:space="preserve">
          <source>Tasks get automatically scheduled onto nodes with available capacity.</source>
        </trans-unit><trans-unit id="133" translate="yes" xml:space="preserve">
          <source>However, the environment variables we're using (AZ_BATCH_TASK_ID and AZ_BATCH_NODE_ID), to show information about which task is being run on which node, are only available in the context of the 'task user', a default account created on each node in order to run tasks.</source>
        </trans-unit><trans-unit id="134" translate="yes" xml:space="preserve">
          <source>Also, the --command-line argument does not directly run under a shell, so you have to explicitly invoke the shell using "/bin/bash -c" in order to use commands like printenv and grep.</source>
        </trans-unit><trans-unit id="135" translate="yes" xml:space="preserve">
          <source>This loop completes the Azure Batch job implementation.</source>
        </trans-unit><trans-unit id="136" translate="yes" xml:space="preserve">
          <source>We will leave the Azure Batch account and pool of worker nodes in place for use in the next module, but we will delete the Batch job.</source>
        </trans-unit><trans-unit id="137" translate="yes" xml:space="preserve">
          <source>Because the Batch job acts as a container for its Batch tasks, the tasks are also deleted.</source>
        </trans-unit><trans-unit id="138" translate="yes" xml:space="preserve">
          <source>Run the following command in the Cloud Shell in order to delete the Batch job:</source>
        </trans-unit></group></body></file></xliff>